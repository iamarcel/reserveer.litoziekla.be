#+title: Litoziekla-ng2: Notes


* Reservations

** TODO Limit the number of Products in a Campaign [0/1]
This will form the limit of places for a show.

*** TODO Create a ~Maximum_Products__c~ field

*** TODO Create Apex trigger to enforce product limit

**** Count the total number of products (sum Quantity for all products in all opportunities of a Campaign)

**** Compare with maximum products in a campaign (if max = 0, don't)

** TODO Creating a reservation

*** Client-side

**** Fetch data

**** Submit reservation
#+BEGIN_SRC typescript
  interface ILineItem {
      ProductId: string,
      Quantity: number
  };

  interface IReservation {
      CampaignId: string,
      FirstName: string,
      LastName: string,
      Email: string,
      Phone: string,
      LineItems: ILineItem[],
  };
#+END_SRC

*** Server-side tasks

**** Create a new Account

**** Create a new Contact within that account

**** Create a new Opportunity, related to the Show

**** Add an Opportunity Line Item for every ticket, attach it to the Opportunity

**** Add the Contact as primary Contact Role to the Opportunity
